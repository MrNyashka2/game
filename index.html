<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D FPS –ò–≥—Ä–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            background: #000;
        }
        
        #gameCanvas {
            display: block;
            width: 100%;
            height: 100vh;
        }
        
        #ui {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            color: white;
            font-size: 20px;
        }
        
        #crosshair {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
        }
        
        #crosshair::before,
        #crosshair::after {
            content: '';
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
        }
        
        #crosshair::before {
            width: 2px;
            height: 20px;
            left: 9px;
            top: 0;
        }
        
        #crosshair::after {
            width: 20px;
            height: 2px;
            left: 0;
            top: 9px;
        }
        
        #stats {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px 25px;
            border-radius: 10px;
            border: 2px solid #00ff00;
        }
        
        #health {
            color: #ff0000;
            margin-bottom: 10px;
        }
        
        #score {
            color: #00ff00;
            margin-bottom: 10px;
        }
        
        #round {
            color: #00aaff;
            margin-bottom: 10px;
        }
        
        #enemies {
            color: #ff6600;
        }
        
        #weaponInfo {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px 25px;
            border-radius: 10px;
            border: 2px solid #ffff00;
            text-align: right;
        }
        
        #weapon {
            color: #ffff00;
            margin-bottom: 10px;
            font-size: 22px;
        }
        
        #ammo {
            color: #ffffff;
            font-size: 20px;
            margin-bottom: 10px;
        }
        
        #instructions {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            pointer-events: auto;
            border: 3px solid #00ff00;
        }
        
        #instructions h1 {
            margin-bottom: 20px;
            color: #00ff00;
        }
        
        #instructions ul {
            list-style: none;
            margin: 20px 0;
            text-align: left;
        }
        
        #instructions li {
            margin: 10px 0;
            padding: 5px;
        }
        
        #startButton {
            padding: 15px 30px;
            font-size: 18px;
            background: #00ff00;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        #startButton:hover {
            background: #00cc00;
            transform: scale(1.05);
        }
        
        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            display: none;
            pointer-events: auto;
            border: 3px solid #ff0000;
        }
        
        #gameOver h1 {
            color: #ff0000;
            margin-bottom: 20px;
        }
        
        #restartButton {
            padding: 15px 30px;
            font-size: 18px;
            background: #ff0000;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        #restartButton:hover {
            background: #cc0000;
            transform: scale(1.05);
        }
        
        #pauseMenu {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            display: none;
            pointer-events: auto;
            border: 3px solid #00ff00;
            min-width: 300px;
        }
        
        #pauseMenu h1 {
            color: #00ff00;
            margin-bottom: 30px;
        }
        
        #pauseMenu button {
            padding: 15px 30px;
            font-size: 18px;
            margin: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            min-width: 200px;
        }
        
        #resumeButton {
            background: #00ff00;
            color: black;
        }
        
        #resumeButton:hover {
            background: #00cc00;
            transform: scale(1.05);
        }
        
        #mainMenuButton {
            background: #ff9900;
            color: white;
        }
        
        #mainMenuButton:hover {
            background: #cc7700;
            transform: scale(1.05);
        }
        
        #reloadIndicator {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            display: none;
        }
        
        #reloadIndicator .label {
            color: #ffff00;
            font-size: 18px;
            margin-bottom: 10px;
            text-align: center;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }
        
        #reloadBarContainer {
            width: 100%;
            height: 25px;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #ffff00;
            border-radius: 15px;
            overflow: hidden;
        }
        
        #reloadBar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff0000, #ffff00, #00ff00);
            transition: width 0.1s linear;
            border-radius: 13px;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <div id="ui">
        <div id="crosshair"></div>
        
        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—Ç–ª–∞–¥–∫–∏ –¥–≤–∏–∂–µ–Ω–∏—è -->
        <div id="debugInfo" style="position: absolute; top: 50%; right: 20px; background: rgba(0,0,0,0.8); padding: 10px; border: 2px solid #ff00ff; border-radius: 5px; font-size: 14px; display: none;">
            <div style="color: #ff00ff; margin-bottom: 5px;">üîß –û–¢–õ–ê–î–ö–ê</div>
            <div id="debugKeys" style="color: #00ff00;"></div>
            <div id="debugPos" style="color: #ffff00;"></div>
            <div id="debugState" style="color: #00ffff;"></div>
        </div>
        
        <div id="stats">
            <div id="health">‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ: <span id="healthValue">100</span></div>
            <div id="score">üéØ –°—á–µ—Ç: <span id="scoreValue">0</span></div>
            <div id="round">üåä –†–∞—É–Ω–¥: <span id="roundValue">1</span></div>
            <div id="enemies">üëæ –í—Ä–∞–≥–∏: <span id="enemiesValue">0/5</span></div>
            <div id="difficulty" style="color: #ffa500; margin-top: 5px;">
                ‚öîÔ∏è <span id="difficultyName">–ù–æ—Ä–º–∞–ª—å–Ω–æ</span>
            </div>
            <div id="map" style="color: #87ceeb; margin-top: 5px;">
                üó∫Ô∏è <span id="mapName">–ü–æ–ª–µ –±–æ—è</span>
            </div>
            <div id="survival" style="color: #ffff00; margin-top: 5px; display: none;">
                ‚è±Ô∏è –í—Ä–µ–º—è: <span id="survivalTime">0:00</span>
            </div>
        </div>
        
        <div id="weaponInfo">
            <div id="weapon">üî´ <span id="weaponName">–ü–∏—Å—Ç–æ–ª–µ—Ç</span> ‚≠ê<span id="weaponLevel">1</span></div>
            <div id="ammo">üì¶ <span id="ammoValue">12/12</span></div>
            <div id="grenades" style="color: #ff4500; margin-top: 5px;">
                üí£ <span id="grenadesValue">3</span> (G)
            </div>
            <div style="font-size: 12px; margin-top: 10px; color: #999;">
                <div>1-–ü–∏—Å—Ç–æ–ª–µ—Ç | 2-–ê–≤—Ç–æ–º–∞—Ç | 3-–î—Ä–æ–±–æ–≤–∏–∫</div>
                <div style="margin-top: 3px;">4-–°–Ω–∞–π–ø–µ—Ä | 5-–ì—Ä–∞–Ω–∞—Ç–æ–º–µ—Ç | 6-–õ–∞–∑–µ—Ä</div>
                <div style="margin-top: 5px; color: #0ff;">Q-–©–∏—Ç | E-–Ø—Ä–æ—Å—Ç—å | U-–ê–ø–≥—Ä–µ–π–¥</div>
            </div>
        </div>
        
        <!-- –ú–∏–Ω–∏–∫–∞—Ä—Ç–∞ -->
        <div id="minimap" style="position: absolute; bottom: 20px; left: 20px; background: rgba(0,0,0,0.7); padding: 10px; border-radius: 10px; border: 2px solid #00ff00;">
            <div style="color: #00ff00; margin-bottom: 5px; text-align: center; font-size: 14px;">üìç –ö–∞—Ä—Ç–∞</div>
            <canvas id="minimapCanvas" width="200" height="200" style="display: block; border: 1px solid #00ff00;"></canvas>
        </div>
        
        <div id="instructions">
            <h1>üéÆ 3D FPS –°–¢–†–ï–õ–Ø–õ–ö–ê</h1>
            <h3 style="color: #ffd700; margin-bottom: 15px;">üåü –°–£–ü–ï–† –í–ï–†–°–ò–Ø 2.0 üåü</h3>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px;">
                <div style="background: rgba(0,100,0,0.3); padding: 10px; border-radius: 5px;">
                    <h4 style="color: #0f0; margin: 0 0 10px 0;">‚öîÔ∏è –û—Å–Ω–æ–≤–Ω–æ–µ</h4>
                    <ul style="margin: 0; padding-left: 20px; font-size: 14px;">
                        <li><strong>WASD</strong> - –î–≤–∏–∂–µ–Ω–∏–µ</li>
                        <li><strong>–ú—ã—à—å</strong> - –û–±–∑–æ—Ä</li>
                        <li><strong>–õ–ö–ú</strong> - –°—Ç—Ä–µ–ª—å–±–∞</li>
                        <li><strong>Shift</strong> - –ë–µ–≥</li>
                        <li><strong>–ü—Ä–æ–±–µ–ª</strong> - –ü—Ä—ã–∂–æ–∫</li>
                        <li><strong>R</strong> - –ü–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∞</li>
                    </ul>
                </div>
                
                <div style="background: rgba(100,0,0,0.3); padding: 10px; border-radius: 5px;">
                    <h4 style="color: #f00; margin: 0 0 10px 0;">üî´ –û—Ä—É–∂–∏–µ</h4>
                    <ul style="margin: 0; padding-left: 20px; font-size: 14px;">
                        <li><strong>1</strong> - –ü–∏—Å—Ç–æ–ª–µ—Ç</li>
                        <li><strong>2</strong> - –ê–≤—Ç–æ–º–∞—Ç</li>
                        <li><strong>3</strong> - –î—Ä–æ–±–æ–≤–∏–∫</li>
                        <li><strong>4</strong> - –°–Ω–∞–π–ø–µ—Ä–∫–∞ üÜï</li>
                        <li><strong>5</strong> - –ì—Ä–∞–Ω–∞—Ç–æ–º–µ—Ç üÜï</li>
                        <li><strong>6</strong> - –õ–∞–∑–µ—Ä üÜï</li>
                    </ul>
                </div>
                
                <div style="background: rgba(0,0,100,0.3); padding: 10px; border-radius: 5px;">
                    <h4 style="color: #0ff; margin: 0 0 10px 0;">‚ú® –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏</h4>
                    <ul style="margin: 0; padding-left: 20px; font-size: 14px;">
                        <li><strong>G</strong> - –ì—Ä–∞–Ω–∞—Ç–∞ üÜï</li>
                        <li><strong>Q</strong> - –©–∏—Ç (–∑–∞—â–∏—Ç–∞) üÜï</li>
                        <li><strong>E</strong> - –Ø—Ä–æ—Å—Ç—å (x2 —É—Ä–æ–Ω) üÜï</li>
                        <li><strong>U</strong> - –ê–ø–≥—Ä–µ–π–¥ –æ—Ä—É–∂–∏—è üÜï</li>
                    </ul>
                </div>
                
                <div style="background: rgba(100,100,0,0.3); padding: 10px; border-radius: 5px;">
                    <h4 style="color: #ff0; margin: 0 0 10px 0;">üéÆ –ü—Ä–æ—á–µ–µ</h4>
                    <ul style="margin: 0; padding-left: 20px; font-size: 14px;">
                        <li><strong>ESC</strong> - –ü–∞—É–∑–∞</li>
                        <li><strong>F3</strong> - –û—Ç–ª–∞–¥–∫–∞</li>
                        <li>üíä –ê–ø—Ç–µ—á–∫–∏ +50 HP</li>
                        <li>üìç –ú–∏–Ω–∏–∫–∞—Ä—Ç–∞ –≤–Ω–∏–∑—É</li>
                    </ul>
                </div>
            </div>
            
            <div style="background: rgba(255,215,0,0.2); padding: 10px; border-radius: 5px; margin-bottom: 15px;">
                <h4 style="color: #ffd700; margin: 0 0 5px 0;">‚≠ê –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</h4>
                <p style="margin: 5px 0; font-size: 14px;">
                    üéµ –ó–≤—É–∫–∏ | üéØ 6 –≤–∏–¥–æ–≤ –æ—Ä—É–∂–∏—è | üëæ 5 —Ç–∏–ø–æ–≤ –≤—Ä–∞–≥–æ–≤ (–±—ã—Å—Ç—Ä—ã–µ, —Ç–∞–Ω–∫–∏, –ª–µ—Ç–∞—é—â–∏–µ, –±–æ—Å—Å—ã) | 
                    üó∫Ô∏è 4 –∫–∞—Ä—Ç—ã | ‚öîÔ∏è 4 —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ | üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è | üìä –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤ | 
                    ‚≠ê –£–ª—É—á—à–µ–Ω–∏–µ –æ—Ä—É–∂–∏—è | üí£ –ì—Ä–∞–Ω–∞—Ç—ã –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ | üìç –ú–∏–Ω–∏–∫–∞—Ä—Ç–∞
                </p>
            </div>
            
            <button id="startButton" style="padding: 20px 40px; font-size: 20px;">–ù–ê–ß–ê–¢–¨ –ò–ì–†–£</button>
        </div>
        
        <div id="gameOver">
            <h1>üíÄ –ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê</h1>
            <p style="font-size: 28px; margin: 15px 0; color: #00ff00;">–°—á–µ—Ç: <span id="finalScore">0</span></p>
            <p style="font-size: 24px; margin: 15px 0; color: #00aaff;">–†–∞—É–Ω–¥: <span id="finalRound">1</span></p>
            <button id="restartButton">–ò–ì–†–ê–¢–¨ –°–ù–û–í–ê</button>
        </div>
        
        <div id="pauseMenu">
            <h1>‚è∏Ô∏è –ü–ê–£–ó–ê</h1>
            
            <div style="background: rgba(0,50,0,0.5); padding: 15px; border-radius: 10px; margin: 15px 0;">
                <h3 style="color: #0f0; margin: 0 0 10px 0;">üìä –¢–µ–∫—É—â–∞—è –∏–≥—Ä–∞</h3>
                <div style="font-size: 16px;">
                    <div>–°—á–µ—Ç: <span id="pauseScore" style="color: #0f0;">0</span></div>
                    <div>–†–∞—É–Ω–¥: <span id="pauseRound" style="color: #0ff;">1</span></div>
                    <div>–£–±–∏—Ç–æ: <span id="pauseKills" style="color: #f00;">0</span></div>
                </div>
            </div>
            
            <div style="background: rgba(50,0,0,0.5); padding: 15px; border-radius: 10px; margin: 15px 0;">
                <h3 style="color: #ffd700; margin: 0 0 10px 0;">‚öîÔ∏è –¢–µ–∫—É—â–µ–µ –æ—Ä—É–∂–∏–µ</h3>
                <div style="font-size: 16px;">
                    <div><span id="pauseWeapon">–ü–∏—Å—Ç–æ–ª–µ—Ç</span> (–£—Ä–æ–≤–µ–Ω—å <span id="pauseWeaponLevel">1</span>)</div>
                    <div style="margin-top: 10px; font-size: 14px; color: #ff0;">
                        üí° –ù–∞–∂–º–∏ <strong>U</strong> –¥–ª—è –∞–ø–≥—Ä–µ–π–¥–∞ (–°—Ç–æ–∏–º–æ—Å—Ç—å: <span id="upgradeCost">500</span> –æ—á–∫–æ–≤)
                    </div>
                </div>
            </div>
            
            <button id="resumeButton">–ü–†–û–î–û–õ–ñ–ò–¢–¨</button>
            <br>
            <button id="viewAchievementsButton" style="background: #ffd700; color: black; margin-top: 10px;">üèÜ –î–û–°–¢–ò–ñ–ï–ù–ò–Ø</button>
            <br>
            <button id="viewScoresButton" style="background: #0088ff; color: white; margin-top: 10px;">üìä –†–ï–ö–û–†–î–´</button>
            <br>
            <button id="mainMenuButton">–ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ</button>
        </div>
        
        <div id="reloadIndicator">
            <div class="label">üîÑ –ü–ï–†–ï–ó–ê–†–Ø–î–ö–ê...</div>
            <div id="reloadBarContainer">
                <div id="reloadBar"></div>
            </div>
        </div>
        
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
        <div id="achievementsModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.95); padding: 30px; border-radius: 15px; border: 3px solid #ffd700; max-width: 600px; max-height: 80vh; overflow-y: auto; pointer-events: auto; z-index: 10000;">
            <h2 style="color: #ffd700; margin-top: 0;">üèÜ –î–û–°–¢–ò–ñ–ï–ù–ò–Ø</h2>
            <div id="achievementsList"></div>
            <button onclick="document.getElementById('achievementsModal').style.display='none'" style="margin-top: 20px; padding: 10px 20px; background: #ff0000; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">–ó–ê–ö–†–´–¢–¨</button>
        </div>
        
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–∫–æ—Ä–¥–æ–≤ -->
        <div id="scoresModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.95); padding: 30px; border-radius: 15px; border: 3px solid #0088ff; max-width: 600px; max-height: 80vh; overflow-y: auto; pointer-events: auto; z-index: 10000;">
            <h2 style="color: #0088ff; margin-top: 0;">üìä –¢–ê–ë–õ–ò–¶–ê –†–ï–ö–û–†–î–û–í</h2>
            <div id="scoresList"></div>
            <button onclick="document.getElementById('scoresModal').style.display='none'; if(document.getElementById('pauseMenu').style.display === 'block') document.body.requestPointerLock();" style="margin-top: 20px; padding: 10px 20px; background: #ff0000; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">–ó–ê–ö–†–´–¢–¨</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="game.js"></script>
</body>
</html>

